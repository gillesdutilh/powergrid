<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add an example to an existing PowerPlot or GridPlot — AddExample • powergrid</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add an example to an existing PowerPlot or GridPlot — AddExample"><meta name="description" content="Add example arrow(s) to an existing figure created by PowerPlot
or GridPlot.
AddExample is a higher level plotting function, so it does not know
anything about the figure it draws on top off. Therefore, take care your
figure makes sense, by supplying the same arguments x and
slicer that you supplied to the PowerPlot or
link{GridPlot} you are drawing on top off: With slicer you
define the plotted plain, with example the value on the x-axis where
the arrow starts. To be sure of a sensible result, use the argument
example inside Powerplot or GridPlot."><meta property="og:description" content="Add example arrow(s) to an existing figure created by PowerPlot
or GridPlot.
AddExample is a higher level plotting function, so it does not know
anything about the figure it draws on top off. Therefore, take care your
figure makes sense, by supplying the same arguments x and
slicer that you supplied to the PowerPlot or
link{GridPlot} you are drawing on top off: With slicer you
define the plotted plain, with example the value on the x-axis where
the arrow starts. To be sure of a sensible result, use the argument
example inside Powerplot or GridPlot."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">powergrid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/powergrid.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SwissClinicalTrialOrganisation/powergrid/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add an example to an existing PowerPlot or GridPlot</h1>
      <small class="dont-index">Source: <a href="https://github.com/SwissClinicalTrialOrganisation/powergrid/blob/main/R/powerplot.R" class="external-link"><code>R/powerplot.R</code></a></small>
      <div class="d-none name"><code>AddExample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add example arrow(s) to an existing figure created by PowerPlot
or GridPlot.</p>
<p><code>AddExample</code> is a higher level plotting function, so it does not know
anything about the figure it draws on top off. Therefore, take care your
figure makes sense, by supplying the same arguments <code>x</code> and
<code>slicer</code> that you supplied to the <code><a href="PowerPlot.html">PowerPlot</a></code> or
<code>link{GridPlot}</code> you are drawing on top off: With <code>slicer</code> you
define the plotted plain, with <code>example</code> the value on the x-axis where
the arrow starts. To be sure of a sensible result, use the argument
<code>example</code> inside <code>Powerplot</code> or <code>GridPlot</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">AddExample</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  slicer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  example <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  find_lowest <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  target_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target_at_least <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"step"</span>,</span>
<span>  summary_function <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  col <span class="op">=</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/gray.colors.html" class="external-link">grey.colors</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  example_text <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-target-value-target-at-least-find-lowest-method-example-text-summary-function">x, target_value, target_at_least, find_lowest, method, example_text, summary_function<a class="anchor" aria-label="anchor" href="#arg-x-target-value-target-at-least-find-lowest-method-example-text-summary-function"></a></dt>
<dd><p>See help for <code>PowerPlot</code>.</p></dd>


<dt id="arg-slicer">slicer<a class="anchor" aria-label="anchor" href="#arg-slicer"></a></dt>
<dd><p>A list, internally passed on to <code><a href="ArraySlicer.html">ArraySlicer</a></code> to
cut out a (multidimensional) slice from x. You can achieve the same by
appending "slicing" inside argument <code>example</code>. However, to assure that the
result of AddExample is consistent with the figure it draws on top of
(PowerPlot or GridPlot), copy the arguments <code>x</code> and <code>slicer</code> given to
PowerPlot or GridPlot to AddTarget.</p></dd>


<dt id="arg-example">example<a class="anchor" aria-label="anchor" href="#arg-example"></a></dt>
<dd><p>A list, defining at which value (list element value) of which
parameter(s) (list element name(s)) the example is drawn for a power of
<code>target_value</code>. You may supply par vector(s) longer than 1 for
multiple examples. If <code>example</code> contains multiple parameters to define the
example, all must contain a vector of the same length. Be aware that the
first element of <code>example</code> defines the parameter x-axis, so this function
is not fool proof. See argument <code>slicer</code> above. If x has only one
dimention, the example needs not be defined.</p></dd>


<dt id="arg-col">col<a class="anchor" aria-label="anchor" href="#arg-col"></a></dt>
<dd><p>Color of arrow and text drawn.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments are passed to the two calls of function
<code><a href="https://rdrr.io/r/graphics/arrows.html" class="external-link">graphics::arrows</a></code> drawing the nicked arrow.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>invisibly NULL</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="arguments-slicer-and-example">arguments <code>slicer</code> and <code>example</code><a class="anchor" aria-label="anchor" href="#arguments-slicer-and-example"></a></h3>


<p><code>slicer</code> takes the slice of x that is in the figure, <code>example</code> defines at
which value of which parameter, the example is drawn. These arguments' use
is the same as in PowerPlot and GridPlot. If you want to make sure that the
result of AddExample is consistent with a figure previously created using
PowerPlot or GridPlot, copy the argument <code>slicer</code> to such function to
AddExample, and define your example in <code>example</code>.</p>
<p>Note however, that:</p>
<p>slicer = list(a = c(1, 2)) and example = list(b = c(3, 4))</p>
<p>has the same result as:</p>
<p>example = list(b = c(3, 4) and a = c(1, 2))  (not defining slicer)</p>
<p>Importantly, the the order of <code>example</code> matters here, where the first
element defines the x-axis.</p>
</div>

<div class="section">
<h3 id="multiple-examples">multiple examples<a class="anchor" aria-label="anchor" href="#multiple-examples"></a></h3>


<p>Argument <code>example</code> may contain vectors with length longer than one to
draw multiple examples.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="PowerPlot.html">PowerPlot</a></code>, <code><a href="GridPlot.html">GridPlot</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Gilles Dutilh</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## For more examples, see ?PowerPlot</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Set up a grid of n, delta and sd:</span></span></span>
<span class="r-in"><span><span class="va">sse_pars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">10</span>, to <span class="op">=</span> <span class="fl">60</span>, by <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.5</span>, to <span class="op">=</span> <span class="fl">1.5</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>, <span class="co"># effect size</span></span></span>
<span class="r-in"><span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.1</span>, <span class="fl">1.1</span>, <span class="fl">.2</span><span class="op">)</span><span class="op">)</span> <span class="co"># Standard deviation</span></span></span>
<span class="r-in"><span><span class="co">## Define a power function using these parameters:</span></span></span>
<span class="r-in"><span><span class="va">PowFun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span>, <span class="va">delta</span>, <span class="va">sd</span><span class="op">)</span><span class="op">{</span> <span class="co"># power for a t-test at alpha = .05</span></span></span>
<span class="r-in"><span>  <span class="va">ptt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/power.t.test.html" class="external-link">power.t.test</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fl">2</span>, delta <span class="op">=</span> <span class="va">delta</span>, sd <span class="op">=</span> <span class="va">sd</span>,</span></span>
<span class="r-in"><span>                     sig.level <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">ptt</span><span class="op">$</span><span class="va">power</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">## Evaluate PowFun across the grid defined by sse_pars:</span></span></span>
<span class="r-in"><span><span class="va">power_array</span> <span class="op">=</span> <span class="fu"><a href="PowerGrid.html">PowerGrid</a></span><span class="op">(</span>pars <span class="op">=</span> <span class="va">sse_pars</span>, fun <span class="op">=</span> <span class="va">PowFun</span>, n_iter <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ======================</span></span></span>
<span class="r-in"><span><span class="co">## PowerPlot</span></span></span>
<span class="r-in"><span><span class="co">## ======================</span></span></span>
<span class="r-in"><span><span class="fu"><a href="PowerPlot.html">PowerPlot</a></span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>          slicer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           slicer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>, <span class="co"># be sure to cut out the same plain as above</span></span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fl">.9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span>,</span></span>
<span class="r-in"><span>           col <span class="op">=</span> <span class="st">'blue'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           slicer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="co"># multiple examples</span></span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span>,</span></span>
<span class="r-in"><span>           col <span class="op">=</span> <span class="st">'yellow'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Careful, you can move the slicer argument to example:</span></span></span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fl">1.2</span>, sd <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>, <span class="co"># delta (x-axis) first</span></span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span>,</span></span>
<span class="r-in"><span>           col <span class="op">=</span> <span class="st">'green'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Careful, because you can put the wrong value on x-axis!</span></span></span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">.7</span>, delta <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>, <span class="co"># sd first?!</span></span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span>,</span></span>
<span class="r-in"><span>           col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="AddExample-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ======================</span></span></span>
<span class="r-in"><span><span class="co">## GridPlot</span></span></span>
<span class="r-in"><span><span class="co">## ======================</span></span></span>
<span class="r-in"><span><span class="fu"><a href="GridPlot.html">GridPlot</a></span><span class="op">(</span><span class="va">power_array</span>, target_value <span class="op">=</span> <span class="fl">.9</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>At some combinations of `x_par` and `l_par`, no `y_par` was found that yielded the required target value, which may result in lines ending abruptly. In most common use cases, you may want to increasing the range of n.</span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fl">1</span>, sd <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span></span></span>
<span class="r-in"><span>           <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## two examples</span></span></span>
<span class="r-in"><span><span class="fu">AddExample</span><span class="op">(</span><span class="va">power_array</span>,</span></span>
<span class="r-in"><span>           example <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.9</span>, <span class="fl">1.2</span><span class="op">)</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">1.1</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           target_value <span class="op">=</span> <span class="fl">.9</span>, col <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span>           <span class="op">)</span></span></span>
<span class="r-plt img"><img src="AddExample-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Dutilh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

